<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esqueceu sua senha? - Lotus Clinic</title>
    <link href="../static/css/bootstrap-icons.css" rel="stylesheet">
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">
    <link href="../static/css/login.css" rel="stylesheet">
    <link href="../static/css/templatemo-kind-heart-charity.css" rel="stylesheet">
    
    <style>
        .cadastro-section {
    background: linear-gradient(135deg, #e8f5f3 0%, #f5f5f5 100%);
    min-height: calc(100vh - 200px);
    display: flex;
    align-items: center;
    padding: 3rem 0;
    position: relative;
    overflow: hidden;
}

.cadastro-section::before {
    content: '';
    position: absolute;
    top: -80px;
    right: -80px;
    width: 400px;
    height: 400px;
    background: #5bc1ac;
    border-radius: 50%;
    opacity: 0.4;
}

.cadastro-section::after {
    content: '';
    position: absolute;
    bottom: -100px;
    left: -100px;
    width: 450px;
    height: 450px;
    background: #6b6b6b;
    border-radius: 50%;
    opacity: 0.3;
}

#cadastroForm {
    background: linear-gradient(145deg, #6b6b6b 0%, #4a4a4a 100%);
    border-radius: 20px;
    padding: 0;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    overflow: hidden;
    max-width: 800px;
    margin: 3rem auto;
    position: relative;
    z-index: 2;
}

#cadastroForm::before {
    content: 'Cadastro';
    display: block;
    background: linear-gradient(135deg, #5a5a5a 0%, #4a4a4a 100%);
    padding: 1.2rem;
    text-align: center;
    border-bottom: 3px solid rgba(255,255,255,0.1);
    color: white;
    font-size: 30px;
    font-weight: 500;
    margin: 0;
}

#cadastroForm .row {
    padding: 0 2.5rem;
}

#cadastroForm .row:first-of-type {
    padding-top: 2rem;
}

.avatar-upload {
    cursor: pointer;
    display: inline-block;
    position: relative;
}

.avatar-upload input[type="file"] {
    position: absolute;
    width: 0;
    height: 0;
    opacity: 0;
    overflow: hidden;
    z-index: -1;
}

.avatar-preview {
    width: 100px;
    height: 100px;
    background: rgba(255,255,255,0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s;
    overflow: hidden;
    position: relative;
    border: 3px solid rgba(91, 193, 172, 0.3);
    margin: 0 auto;
}

.avatar-preview:hover {
    background: white;
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(91, 193, 172, 0.5);
    border-color: #5bc1ac;
}

.avatar-preview i {
    font-size: 60px;
    color: #999;
    transition: color 0.3s;
}

.avatar-preview:hover i {
    color: #5bc1ac;
}

.avatar-preview img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
}

#cadastroForm .text-center {
    padding: 0 2.5rem 1rem;
}

#cadastroForm .loading {
    color: white;
}

#cadastroForm #mensagem {
    padding: 0 2.5rem;
    margin-bottom: 1rem;
}

.cadastro-links {
    display: flex;
    justify-content: center;
    padding: 0 2.5rem 1.5rem;
}

.cadastro-links a {
    color: #5bc1ac;
    font-size: 12px;
    text-decoration: none;
}

.cadastro-links a:hover {
    text-decoration: underline;
}

/* Loading styles */
.loading {
    text-align: center;
}

.loading .spinner-border {
    width: 2rem;
    height: 2rem;
    border-width: 0.2em;
}

/* Responsividade para Cadastro */
@media (max-width: 768px) {
    #cadastroForm {
        margin: 2rem 1rem;
    }
    
    #cadastroForm .row {
        padding: 0 1.5rem;
    }
    
    #cadastroForm .row:first-of-type {
        padding-top: 1.5rem;
    }
    
    #cadastroForm .text-center,
    #cadastroForm #mensagem,
    .cadastro-links {
        padding: 0 1.5rem 1rem;
    }
}


/* ESQUECEU SUA SENHA??*/
 .recovery-section {
            background: linear-gradient(135deg, #e8f5f3 0%, #f5f5f5 100%);
            min-height: calc(100vh - 200px);
            display: flex;
            align-items: center;
            padding: 3rem 0;
            position: relative;
            overflow: hidden;
        }

        .recovery-section::before {
            content: '';
            position: absolute;
            bottom: -50px;
            left: -100px;
            width: 350px;
            height: 350px;
            background: #5bc1ac;
            border-radius: 50%;
            opacity: 0.6;
        }

        .recovery-section::after {
            content: '';
            position: absolute;
            top: -80px;
            right: -80px;
            width: 400px;
            height: 400px;
            background: #b8b8b8;
            border-radius: 50%;
            opacity: 0.4;
        }

        .recovery-container {
            position: relative;
            z-index: 2;
            max-width: 500px;
            margin: 0 auto;
        }

        .recovery-card {
            background: linear-gradient(145deg, #737373 0%, #5a5a5a 100%);
            border-radius: 20px;
            padding: 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .recovery-header {
            background: #6b6b6b;
            padding: 1rem;
            text-align: center;
            border-bottom: 3px solid rgba(255,255,255,0.1);
        }

        .recovery-header h4 {
            color: white;
            font-size: 24px;
            font-weight: 500;
            margin: 0;
        }

        .recovery-body {
            padding: 2rem;
        }

        .form-control-recovery {
            background: rgb(228, 224, 224);
            border: none;
            border-radius: 25px;
            padding: 12px 20px;
            font-size: 14px;
            margin-bottom: 1rem;
            color: #000000;
            width: 100%;
        }

        .form-control-recovery::placeholder {
            color: #999;
        }

        .form-control-recovery:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(91,193,172,0.3);
            background: white;
        }

        .recovery-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
        }

        .btn-recovery {
            border: none;
            border-radius: 25px;
            color: rgb(9, 61, 61);
            padding: 10px 30px;
            font-weight: 500;
            transition: all 0.3s;
            cursor: pointer;
            font-size: 14px;

        }

        .btn-voltar {
            background: #4aa896;
        }

        .btn-voltar:hover {
            background: #3d8f7f;
            transform: translateY(-2px);
        }

        .btn-continuar {
            background: #4aa896;
            
        }

        .btn-continuar:hover {
            background: #3d8f7f;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .recovery-container {
                margin: 0 1rem;
            }

            .recovery-buttons {
                flex-direction: column;
            }

            .btn-recovery {
                width: 100%;
            }
        }
    </style>

</head>

<body>
    <header class="site-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-12 d-flex flex-wrap">
                    <p class="d-flex me-4 mb-0"> <i class="bi-geo-alt me-2"></i> Rua Mariano Procópio, 37 - Rio de Janeiro </p>
                    <p class="d-flex mb-0"> <i class="bi-envelope me-2"></i> <a href="mailto:contato@lotusclinic.com">
                            contato@lotusclinic.com </a> </p>
                </div>
                <div class="col-lg-3 col-12 ms-auto d-lg-block d-none">
                    <ul class="social-icon">
                        <li class="social-icon-item"> <a href="#" class="social-icon-link bi-twitter"></a> </li>
                        <li class="social-icon-item"> <a href="#" class="social-icon-link bi-facebook"></a> </li>
                        <li class="social-icon-item"> <a href="#" class="social-icon-link bi-instagram"></a> </li>
                        <li class="social-icon-item"> <a href="#" class="social-icon-link bi-youtube"></a> </li>
                        <li class="social-icon-item"> <a href="#" class="social-icon-link bi-whatsapp"></a> </li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <nav class="navbar navbar-expand-lg bg-light shadow-lg">
        <div class="container"> 
            <a class="navbar-brand" href="index.html"> 
                <img src="../static/images/Lotus.png" class="logo img-fluid" alt="Lotus Clinic"> 
                <span class="simonetta-regular"> Lotus <small class="simonetta-black">Private medical clinic</small> </span> 
            </a> 
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> 
                <span class="navbar-toggler-icon"></span> 
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"> <a class="nav-link click-scroll" href="index.html#top">Inicio</a> </li>
                    <li class="nav-item"> <a class="nav-link click-scroll" href="index.html#section_2">Sobre</a> </li>
                    <li class="nav-item"> <a class="nav-link click-scroll" href="index.html#section_3">Agende</a> </li>
                    <li class="nav-item"> <a class="nav-link click-scroll" href="index.html#section_4">Contato</a> </li>
                    <li class="nav-item ms-3"> <a class="nav-link custom-btn custom-border-btn btn"
                            href="login.html">Entrar</a> </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- RECOVERY SECTION -->
    <section class="recovery-section">
        <div class="recovery-container">
            <div class="recovery-card">
                <div class="recovery-header">
                    <h4>Esqueceu sua senha?</h4>
                </div>
                <div class="recovery-body">
                    <form id="recoveryForm">
                        <input 
                            type="text" 
                            class="form-control-recovery" 
                            placeholder="Insira seu CPF" 
                            id="cpf"
                            required
                        >
                        <input 
                            type="email" 
                            class="form-control-recovery" 
                            placeholder="Insira seu e-mail" 
                            id="email"
                            required
                        >
                        <div class="recovery-buttons">
                            <button type="button" class="btn-recovery" onclick="window.location.href='/login'">
                                voltar
                            </button>
                            <button type="submit" class="btn-recovery">
                                continuar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-12 mb-4">
                    <img src="../static/images/Lotus.png" class="logo img-fluid" alt="">
                </div>

                <div class="col-lg-4 col-md-6 col-12 mb-4">
                    <h5 class="site-footer-title mb-3">Conteúdos</h5>
                    <ul class="footer-menu">
                        <li class="footer-menu-item"><a href="#" class="footer-menu-link">Sobre nós</a></li>
                        <li class="footer-menu-item"><a href="#" class="footer-menu-link">Algum erro na página?</a></li>
                        <li class="footer-menu-item"><a href="#" class="footer-menu-link">Agende sua consulta</a></li>
                    </ul>
                </div>

                <div class="col-lg-4 col-md-6 col-12 mx-auto">
                    <h5 class="site-footer-title mb-3">Informações de contato</h5>
                    <p class="text-white d-flex mb-2">
                        <i class="bi-geo-alt me-2"></i>
                        Rua Mariano Procópio, 37 - Rio de Janeiro, RJ
                    </p>
                    <p class="text-white d-flex mb-2">
                        <i class="bi-telephone me-2"></i>
                        <a href="tel:21997925722" class="site-footer-link">
                            (21) 9 9792-5722
                        </a>
                    </p>
                    <p class="text-white d-flex">
                        <i class="bi-envelope me-2"></i>
                        <a href="mailto:contato@lotusclinic.com" class="site-footer-link">
                            contato@lotusclinic.com
                        </a>
                    </p>
                </div>
            </div>
        </div>

        <div class="site-footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-7 col-12">
                        <p class="copyright-text mb-0">Copyright © 2025 <a href="#">Lotus Clinic</a></p>
                    </div>
                    <div class="col-lg-6 col-md-5 col-12 d-flex justify-content-center align-items-center mx-auto">
                        <ul class="social-icon">
                            <li class="social-icon-item">
                                <a href="#" class="social-icon-link bi-twitter"></a>
                            </li>
                            <li class="social-icon-item">
                                <a href="#" class="social-icon-link bi-facebook"></a>
                            </li>
                            <li class="social-icon-item">
                                <a href="#" class="social-icon-link bi-instagram"></a>
                            </li>
                            <li class="social-icon-item">
                                <a href="#" class="social-icon-link bi-whatsapp"></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="../static/js/bootstrap.bundle.min.js"></script>
    <script src="../static/js/bootstrap.bundle.min.js"></script>
<script>
    // Armazenar email na sessão para usar na próxima página
    let emailRecuperacao = '';

    document.getElementById('recoveryForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const cpf = document.getElementById('cpf').value.trim();
        const email = document.getElementById('email').value.trim();
        
        // Validações básicas
        if (!cpf || !email) {
            alert('Por favor, preencha todos os campos');
            return;
        }
        
        // Desabilitar botão durante envio
        const btnContinuar = e.target.querySelector('button[type="submit"]');
        const textoOriginal = btnContinuar.textContent;
        btnContinuar.disabled = true;
        btnContinuar.textContent = 'Enviando...';
        
        try {
            const response = await fetch('/api/solicitar-codigo', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ cpf, email })
            });
            
            const data = await response.json();
            
            if (response.ok && data.success) {
                // Armazenar email no sessionStorage
                sessionStorage.setItem('email_recuperacao', email);
                
                // DEBUG: Mostrar código (REMOVER EM PRODUÇÃO)
                if (data.debug_code) {
                    alert(`✅ Código enviado!\n\nDEBUG: ${data.debug_code}`);
                } else {
                    alert('✅ Código enviado para seu email!');
                }
                
                // Redirecionar para página de código
                window.location.href = '/password-code';
            } else {
                alert('❌ ' + (data.error || 'Erro ao enviar código'));
                btnContinuar.disabled = false;
                btnContinuar.textContent = textoOriginal;
            }
        } catch (error) {
            console.error('Erro:', error);
            alert('❌ Erro ao conectar com o servidor');
            btnContinuar.disabled = false;
            btnContinuar.textContent = textoOriginal;
        }
    });
</script>
<div vw class="enabled">
    <div vw-access-button class="active"></div>
    <div vw-plugin-wrapper>
      <div class="vw-plugin-top-wrapper"></div>
    </div>
  </div>
  <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
  <script>
    new window.VLibras.Widget('https://vlibras.gov.br/app');
  </script>
</body>
</html>